-- Load OrionLib
local OrionLib = loadstring(game:HttpGet("https://raw.githubusercontent.com/OrionLib/OrionLib/main/OrionLib.lua"))()

local Window = OrionLib:MakeWindow({Name = "My Game GUI", HidePremium = false})

local MainTab = Window:MakeTab({
    Name = "Main",
    Icon = "rbxassetid://1234567890", -- Replace with your desired icon asset ID
    PremiumOnly = false
})

-- Local player reference
local players = game:GetService("Players")
local localPlayer = players.LocalPlayer

-- Initialize hero mapping
local heroMapping = {
    Black = "CombatBlack",
    Vegeta = "CombatVegeta",
    Broly = "CombatBroly",
    Gohan = "CombatGohan"
}

-- Initialize variables
local selectedHero = "Black" -- Default hero
local toggles = {
    m1 = false,
    m2 = false,
    m3 = false,
    downslam = false
}

-- Function to execute actions based on toggle state and selected hero
local function executeActions()
    local remoteEvent = game:GetService("ReplicatedStorage").BridgeNet2.dataRemoteEvent

    -- Define arguments for each action based on selected hero
    local args = {
        m1 = {localPlayer.Character, heroMapping[selectedHero], "M1"},
        m2 = {localPlayer.Character, heroMapping[selectedHero], "M2"},
        m3 = {
            {localPlayer.Character, heroMapping[selectedHero], "M1Stun"},
            {localPlayer.Character, heroMapping[selectedHero], "M1SwingSFX"}
        },
        downslam = {localPlayer.Character, heroMapping[selectedHero], "DownSlam"}
    }
    
    -- Apply effects to all players except the local player
    for _, player in ipairs(players:GetPlayers()) do
        if player ~= localPlayer and player.Character then
            if toggles.m1 then
                remoteEvent:FireServer(unpack(args.m1))
            end
            if toggles.m2 then
                remoteEvent:FireServer(unpack(args.m2))
            end
            if toggles.m3 then
                remoteEvent:FireServer(unpack(args.m3))
            end
            if toggles.downslam then
                remoteEvent:FireServer(unpack(args.downslam))
            end
        end
    end
end

-- Add dropdown for selecting hero
MainTab:AddDropdown({
    Name = "Select Hero",
    Default = "Black", -- Default selected value
    Options = {"Black", "Vegeta", "Broly", "Gohan"}, -- List of options
    Callback = function(selected)
        selectedHero = selected
        print("Selected Hero:", selectedHero) -- Print the selected hero for debugging
    end
})

-- Add toggles to the "Main" tab
MainTab:AddToggle({
    Name = "M1 Toggle",
    Default = false,
    Callback = function(state)
        toggles.m1 = state
    end
})

MainTab:AddToggle({
    Name = "M2 Toggle",
    Default = false,
    Callback = function(state)
        toggles.m2 = state
    end
})

MainTab:AddToggle({
    Name = "M3 Toggle",
    Default = false,
    Callback = function(state)
        toggles.m3 = state
    end
})

MainTab:AddToggle({
    Name = "DownSlam Toggle",
    Default = false,
    Callback = function(state)
        toggles.downslam = state
    end
})

-- Initialize OrionLib
OrionLib:Init()

-- Loop to check and execute actions based on toggle states
while true do
    executeActions()
    wait(1)  -- Adjust the wait time as needed
end
